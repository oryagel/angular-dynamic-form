<div class="main-bound">
    <div #popup [hidden]="!controlToEdit" class="popup">
        <div (click)="closePopup()"></div>
        <lib-control-configuration
            *ngIf="controlToEdit"
            [controlConfiguration]="controlToEdit.initialConfig"
            [controlDefinition]="controlToEdit.controlDefinition"
            (submit)="submitEditing($event)"
        ></lib-control-configuration>
    </div>
    <div cdkDropList [cdkDropListData]="controlsStream$ | async" [cdkDropListConnectedTo]="[form]" class="available-controls">
        <div class="list-item" cdkDrag *ngFor="let item of (controlsStream$ | async)" cdkDragBoundary=".main-bound">
            <ng-container *dynamicFormControlOutlet="item.control"></ng-container>
        </div>
    </div>
    <div cdkDropList #form="cdkDropList" [cdkDropListData]="items" class="form bound" (cdkDropListDropped)="drop($event)">
        <div
            class="list-item"
            [id]="item"
            *ngFor="let item of items; let index = index"
            cdkDragLockAxis="y"
            cdkDrag
            cdkDragBoundary=".form.bound"
        >
            <div>
                <div><button mat-raised-button color="primary" (click)="editControl(item)">Edit</button></div>
                <ng-container *dynamicFormControlOutlet="item.control"></ng-container>
            </div>
            <span (click)="removeFromForm(index)" class="cross">X</span>
        </div>
    </div>
</div>
